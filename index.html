<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./packages/editor/dist/css/style.css" />
    <!-- <style>
      #root {
        padding: 100px;
      }
    </style> -->

    <style>
  #editor—wrapper {
    border: 1px solid #ccc;
    z-index: 100; /* 按需定义 */
  }
  #toolbar-container { border-bottom: 1px solid #ccc; }
  #editor-container { height: 500px; }
</style>
  </head>

  <body>
    <div id="root">
      <div id="editor—wrapper">
    <div id="toolbar-container"><!-- 工具栏 --></div>
    <div id="editor-container"><!-- 编辑器 --></div>
</div>
    </div>
  </body>

  <script src="https://unpkg.com/react@18.3.1/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.27.5/babel.min.js"></script>
  <script src="./packages/editor/dist/index.js"></script>
  <script src="./packages/editor-for-react/dist/index.js"></script>

  <script type="text/babel">
    const root = ReactDOM.createRoot(document.getElementById('root'));

  const {Toolbar,Editor} = WangEditorForReact

function MyEditor() {
  const [editor, setEditor] = React.useState(null); // 存储 editor 实例
  const [html, setHtml] = React.useState('<p>hello</p>');
  const [mode ,setMode] = React.useState("default");

  // 模拟 ajax 请求，异步设置 html
  React.useEffect(() => {
    setTimeout(() => {
      setHtml('<p>hello&nbsp;<strong>world</strong>.</p>\n<p><br></p>');
    }, 1500);
  }, []);

  const toolbarConfig = {};
  const editorConfig = {
    placeholder: '请输入内容...',
  };

  // 及时销毁 editor
  React.useEffect(() => {
    return () => {
      if (editor == null) return;
      editor.destroy();
      setEditor(null);
    };
  }, [editor]);

  function insertText() {
    if (editor == null) return;
    editor.insertText(' hello ');
  }

  function printHtml() {
    if (editor == null) return;
    console.log(editor.getHtml());
  }

  return (
    <React.Fragment>
      <div>
        <button onClick={()=>setMode(mode==="default"?"simple":"default")}>set html</button>
        <button onClick={insertText}>insert text</button>
        <button onClick={printHtml}>print html</button>
      </div>

      <div style={{ border: '1px solid #ccc', zIndex: 100, marginTop: '15px' }}>
        <Toolbar
          editor={editor}
          defaultConfig={toolbarConfig}
          mode={mode}
          style={{ borderBottom: '1px solid #ccc' }}
        />
        <Editor
          defaultConfig={editorConfig}
          value={html}
          onCreated={setEditor}
          onChange={(editor) => setHtml(editor.getHtml())}
          mode="default"
          style={{ height: '500px' }}
        />
      </div>
      <div style={{ marginTop: '15px' }}>{html}</div>
    </React.Fragment>
  );
}
    root.render(  <MyEditor/> );
  </script>
</html>
